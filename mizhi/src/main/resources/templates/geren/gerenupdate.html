<!DOCTYPE html>
<html lang="zh" data-hairline="true" data-theme="light" data-focus-method="keyboard"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<link href="css/mizhimain.css" rel="stylesheet">
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/layer/layer.js"></script>
<body>
<div class="ProfileHeader-content">
    <script>
        $(function () {
            $(".nicknamebut").click(function () {
                $(".nicknametext").hide();
                var nickname = $(".nicknametext").text();
                $("input[name='nickname']").show();
                $("input[name='nickname']").val(nickname);
                $(".nicknamesub").show();
                $(this).hide();
            });
            $(".nicknameForm").submit(function () {
                var nickname = $("input[name='nickname']").val();
                if (nickname == null || nickname == '') {
                    layer.msg("请输入昵称");
                    return false;
                }
                $.post("updateUserController", {"nickname": nickname}, function (returnData) {
                    if (returnData) {
                        $(".nicknametext").show().text(nickname);
                        $("input[name='nickname']").hide();
                        $(".nicknamesub").hide();
                        $(".nicknamebut").show();
                        parent.$(".nicknameL").text(nickname);
                    }
                }, "json");
                return false;
            });
        })
    </script>
    <form class="nicknameForm" method="post" action="updateUserController">
        <div class="ProfileHeader-contentHead">
            <h1 class="ProfileHeader-title">
                <div class="FullnameField-editable"><span class="FullnameField-name nicknametext"
                                                          th:text="${session.user.getNickname()}">谋生者</span>
                    <input type="text" name="nickname" hidden/>
                    <button type="button" class="Button ModifyButton Field-modify Button--link nicknamebut">
                        <svg viewBox="0 0 12 12" class="Icon ModifyButton-icon Icon--modify" width="12" height="16"
                             aria-hidden="true" style="height: 16px; width: 12px;"><title></title>
                            <g>
                                <path d="M.423 10.32L0 12l1.667-.474 1.55-.44-2.4-2.33-.394 1.564zM10.153.233c-.327-.318-.85-.31-1.17.018l-.793.817 2.49 2.414.792-.814c.318-.328.312-.852-.017-1.17l-1.3-1.263zM3.84 10.536L1.35 8.122l6.265-6.46 2.49 2.414-6.265 6.46z"
                                      fill-rule="evenodd"></path>
                            </g>
                        </svg>
                        修改
                    </button>
                    <button class="Button ModifyButton Field-modify Button--link nicknamesub" type="submit"
                            style="display: none;">确认
                    </button>
                </div>
            </h1>
        </div>
    </form>
    <div class="ProfileEdit-fields">
        <script>
            $(function () {
                $(".xingbiebut").click(function () {
                    $(".xingbiebut").hide();
                    $(".xingbiesub").show();
                    $(".xingbietext").hide();
                    $(".xingbie").show();
                });
                $(".xingbieForm").submit(function () {
                    var gender = $("input[name='gender']:checked").val();
                    if (gender == null || gender == '') {
                        layer.msg("请选择");
                        return false;
                    }
                    $.post("updateUserController", {"gender": gender}, function (returnData) {
                        if (gender == 1) {
                            $(".xingbietext").text("男");
                            parent.$(".xingbieL").text("男");
                        } else {
                            $(".xingbietext").text("女");
                            parent.$(".xingbieL").text("女");
                        }
                        $(".xingbiebut").show();
                        $(".xingbiesub").hide();
                        $(".xingbietext").show();
                        $(".xingbie").hide();

                    }, "json");
                    return false;
                });
            })
        </script>
        <form class="Field xingbieForm"><h3 class="Field-label">性别</h3>
            <div class="Field-content">
                <div><span class="Field-text xingbietext" th:if="${session.user.getGender()} eq '0'">女</span><span
                        class="Field-text xingbietext" th:if="${session.user.getGender()} eq '1'">男</span>
                    <span class="xingbie" hidden><input type="radio" name="gender" value="1"/>男 <input type="radio"
                                                                                                       name="gender"
                                                                                                       value="0"/>女</span>
                    <button type="button" class="Button ModifyButton Field-modify Button--link xingbiebut">
                        <svg viewBox="0 0 12 12" class="Icon ModifyButton-icon Icon--modify" width="12" height="16" x
                             aria-hidden="true" style="height: 16px; width: 12px;"><title></title>
                            <g>
                                <path d="M.423 10.32L0 12l1.667-.474 1.55-.44-2.4-2.33-.394 1.564zM10.153.233c-.327-.318-.85-.31-1.17.018l-.793.817 2.49 2.414.792-.814c.318-.328.312-.852-.017-1.17l-1.3-1.263zM3.84 10.536L1.35 8.122l6.265-6.46 2.49 2.414-6.265 6.46z"
                                      fill-rule="evenodd"></path>
                            </g>
                        </svg>
                        修改
                    </button>
                    <input type="submit" style="display: none;"
                           class="Button ModifyButton Field-modify Button--link xingbiesub">
                </div>
            </div>
        </form>

        <form class="Field"><h3 class="Field-label">居住地</h3>
            <div class="Field-content">
                <div class="AddButton">
                    <button type="button" class="Button Button--link">
                        <svg viewBox="0 0 18 18" class="Icon AddButton-icon Icon--add Icon--left" width="20" height="20"
                             aria-hidden="true" style="height: 20px; width: 20px;"><title></title>
                            <g>
                                <g fill-rule="evenodd">
                                    <path d="M6.035 16.433c-.875-.35-1.678-.848-2.383-1.482-.205-.184-.52-.167-.707.04-.185.204-.167.52.038.705.794.714 1.696 1.274 2.682 1.668.06.023.123.035.185.035.198 0 .386-.12.464-.314.103-.258-.022-.55-.28-.65zM1.097 10.247C1.054 9.975.8 9.79.525 9.83c-.273.043-.46.3-.417.57.154.98.467 1.925.93 2.803.09.17.264.267.443.267.08 0 .16-.02.234-.058.244-.13.338-.432.208-.676-.41-.78-.69-1.618-.825-2.49zM9.106 1c.95.014 1.878.19 2.76.528.058.022.118.033.178.033.2 0 .39-.12.467-.32.1-.258-.03-.547-.287-.646C11.233.214 10.19.014 9.12 0h-.007c-.273 0-.496.22-.5.493-.003.278.218.504.493.508zM3.73 2.83c.108 0 .218-.034.31-.107.693-.55 1.465-.976 2.295-1.27.26-.09.397-.377.305-.637C6.548.556 6.263.42 6.002.51 5.068.84 4.2 1.323 3.42 1.94c-.217.17-.254.485-.083.702.1.124.245.19.393.19zM2.01 4.136c-.236-.144-.544-.07-.688.165-.557.91-.945 1.9-1.15 2.944-.055.27.12.534.392.587.033.008.065.01.098.01.234 0 .443-.164.49-.402.184-.927.528-1.807 1.023-2.614.144-.236.07-.543-.165-.688zM14.927 2.228c-.207-.183-.523-.162-.705.047-.182.208-.16.523.047.706.664.583 1.224 1.265 1.665 2.028.092.16.26.25.433.25.085 0 .17-.02.25-.067.24-.137.32-.443.183-.682-.495-.86-1.125-1.626-1.873-2.28zM17.294 7.07c-.27.047-.454.306-.408.578.076.44.114.896.114 1.35 0 .493-.046.984-.133 1.46-.05.27.13.532.402.582.03.005.06.008.09.008.236 0 .446-.17.49-.41.1-.534.148-1.085.15-1.638 0-.513-.044-1.025-.13-1.52-.045-.273-.303-.457-.576-.41zM16.566 12.91c-.235-.14-.544-.065-.686.174-.452.76-1.02 1.434-1.692 2.005-.21.18-.235.494-.057.704.1.116.24.176.382.176.115 0 .23-.04.324-.12.754-.643 1.395-1.4 1.903-2.254.142-.238.064-.544-.174-.686zM11.766 16.51c-.884.325-1.814.49-2.772.49l-.208-.002c-.283-.02-.505.21-.513.487-.007.275.21.506.487.513L9 18c1.07 0 2.116-.186 3.11-.553.26-.095.393-.383.297-.642-.095-.26-.385-.392-.64-.295zM9.8 8.2V6.3c0-.442-.358-.8-.8-.8-.442 0-.8.358-.8.8v1.9H6.3c-.442 0-.8.358-.8.8 0 .442.358.8.8.8h1.9v1.9c0 .442.358.8.8.8.442 0 .8-.358.8-.8V9.8h1.9c.442 0 .8-.358.8-.8 0-.442-.358-.8-.8-.8H9.8z"></path>
                                </g>
                            </g>
                        </svg>
                        添加居住地
                    </button>
                </div>
            </div>
        </form>
        <script>
            $(function () {
                $(".gerenbut").click(function () {
                    $(".gerenbut").hide();
                    $(".gerensub").show();
                    var gerentxt = $(".gerentext").hide().text();
                    $("input[name='geren']").val(gerentxt);
                    $(".geren").show();
                });
                $(".gerenForm").submit(function () {
                    var introduce = $("input[name='geren']").val();
                    if (introduce == null || introduce == '') {
                        layer.msg("请填写");
                        return false;
                    }
                    $.post("updateUserController", {"introduce": introduce}, function (returnData) {
                        $(".gerenbut").show();
                        $(".gerensub").hide();
                        $(".gerentext").show().text(introduce);
                        $(".geren").hide();
                        parent.$(".jianjieL").text(introduce);
                    }, "json");
                    return false;
                });
            })
        </script>
        <form class="Field gerenForm"><h3 class="Field-label">个人简介</h3>
            <div class="Field-content">
                <div class="DescriptionField-content">
                    <span class="gerentext" th:text="${session.user.getIntroduce()}">asdfsadfa</span><span class="geren"
                                                                                                           hidden><input
                        type="text" name="geren"/></span>
                    <button type="button" class="Button ModifyButton Button--link gerenbut">
                        <svg viewBox="0 0 12 12" class="Icon ModifyButton-icon Icon--modify" width="12" height="16"
                             aria-hidden="true" style="height: 16px; width: 12px;"><title></title>
                            <g>
                                <path d="M.423 10.32L0 12l1.667-.474 1.55-.44-2.4-2.33-.394 1.564zM10.153.233c-.327-.318-.85-.31-1.17.018l-.793.817 2.49 2.414.792-.814c.318-.328.312-.852-.017-1.17l-1.3-1.263zM3.84 10.536L1.35 8.122l6.265-6.46 2.49 2.414-6.265 6.46z"
                                      fill-rule="evenodd"></path>
                            </g>
                        </svg>
                        填写
                    </button>
                    <input type="submit" style="display: none;" class="gerensub Button ModifyButton Button--link">
                </div>
            </div>
        </form>
    </div>
</div>
</body>
</html>