<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.jishu.mizhi.kai.manager.dao.ManagerUserDao">
    <resultMap id="ManagerUser" type="cn.jishu.mizhi.entity.ManagerUser" autoMapping="true">
        <id property="mUid" column="mUid"></id>
        <collection property="managerControllerList" resultMap="ManagerController"></collection>
    </resultMap>
    <resultMap id="ManagerController" type="cn.jishu.mizhi.entity.ManagerController" autoMapping="true">
        <id column="mCid" property="mCid"></id>
    </resultMap>


    <select id="queryAllManagerUser" resultMap="ManagerUser">
        SELECT * FROM managerUser,managerController WHERE managerUser.`mUid`=managerController.`mmid` AND managerUser.`mUid`=#{userid} GROUP BY managerController.`mCtime`
    </select>

    <select id="mLogin" resultType="cn.jishu.mizhi.entity.ManagerUser">
        select * from managerUser where mUserName=#{username} and mPassword=#{password}
    </select>

    <select id="mQueryByUserName" resultType="cn.jishu.mizhi.entity.ManagerUser">
        select * from managerUser where mUserName=#{username}
    </select>



    <select id="mCdate" resultType="cn.jishu.mizhi.entity.ManagerController">
        SELECT managercontroller.`mCtime` FROM managercontroller , manageruser WHERE managercontroller.mmid=manageruser.mUid AND manageruser.`mUid`=1 GROUP BY managercontroller.`mCtime` ORDER BY  managercontroller.`mCtime` DESC
    </select>

    <select id="mContext" resultType="cn.jishu.mizhi.entity.ManagerController">
        SELECT * FROM managercontroller WHERE mCtime=#{rzTime}
    </select>

</mapper>